<html><head>
   <title>SPIMode</title>
   <meta name="generator"  content="HelpMaker.net" >
   <meta name="keywords"  content="Keyboard Overview," ></head>
<body bgcolor="FFFCEA" >
<table width="100%"  border="0"  cellspacing="0"  cellpadding="2"  bgcolor="C0C0C0" >
  <tr>
    <td align="left" >
      <div align="left" ><font face="Arial"  color="#010101"  size="4" ><span style="font-size:14pt" >SPIMode</span></font><font color="#010101" ></font></div>

    </td>
    <td align="right" >
      <font face="Arial"  size="2" >
        <a href="ps2readbyte.htm">Previous</a>&nbsp;&nbsp;<a href="spitransfer.htm">Next</a>
      </font>
    </td>
  </tr></table>
<hr><div align="left" ><font face="Arial" ><span style="font-size:12pt" ><b>Syntax:&nbsp;&nbsp;&nbsp;&nbsp;</b></span></font><font color="#010101" ></font></div><div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >&nbsp;&nbsp;&nbsp;&nbsp;SPIMode ( <i>Mode&nbsp; [,&nbsp; SPIClockMode ] )</i></span></font><font color="#010101" ></font></div><div align="left" ><br></div><font color="#010101" ><div align="left" ></font><font face="Arial"  color="#010101" ><span style="font-size:12pt" ><b>Command Availability:</b></span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >Available on PIC microcontrollers with Synchronous Serial Port (SSP) 
module and AVR's microcontrollers.</span></font><font color="#010101" ></font></div><div align="left" ><br></div><font color="#010101" ><div align="left" ></font><font face="Arial"  color="#010101" ><span style="font-size:12pt" ><b>Explanation:</b></span></font><font color="#010101" ></font></div><div align="left" ><br></div><font color="#010101" ><div align="left" ></font><font face="Arial"  color="#010101" ><span style="font-size:12pt" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial"  color="#010101" ><span style="font-size:12pt" ><b>Mode</b> sets the frequency of the SPI module within the microprocessor. 
These are the possible SPI Modes.</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font color="#010101" ></font></div><blockquote><table border="1"  width="491"  cellpadding="3"  cellspacing="0"  style="border-collapse: collapse; border: none" >
    <tr>
    <td align="center"  valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial" ><span style="font-size:12pt" ><b>Mode</b></span></font><font color="#010101" ></font></div>
    </td>
    <td align="center"  valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial" ><span style="font-size:12pt" ><b>Description</b></span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td align="center"  valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" ><b>MasterSlow</b></span></font><font color="#010101" ></font></div>
    </td>
    <td valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >Master mode, SPI clock is 1/64 of the frequency of 
    the PIC.</span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td align="center"  valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" ><b>Master</b></span></font><font color="#010101" ></font></div>
    </td>
    <td valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >Master mode, SPI clock is 1/16 of the frequency of 
    the PIC.</span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td align="center"  valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" ><b>MasterFast</b></span></font><font color="#010101" ></font></div>
    </td>
    <td valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >Master mode, SPI clock is 1/4 of the frequency of 
    the PIC.</span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td align="center"  valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" ><b>Slave</b></span></font><font color="#010101" ></font></div>
    </td>
    <td valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >Slave mode</span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td align="center"  valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" ><b>SlaveSS</b></span></font><font color="#010101" ></font></div>
    </td>
    <td valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >Slave mode, with the Slave Select pin enabled.</span></font><font color="#010101" ></font></div>
    </td></tr></table></blockquote><div align="left" ><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial"  color="#010101" ><span style="font-size:12pt" ><b>SPIClockMode</b></span></font><font face="Calibri"  color="#010101" ><span style="font-size:12pt" ><i> </i></span></font><font face="Arial"  color="#010101" ><span style="font-size:12pt" >is an 
optional parameter to set the mode of the SPI 
clock mode. This optional parameter sets both the clock polarity and 
clock edge.</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font color="#010101" ></font></div><blockquote><table border="1"  width="491"  cellpadding="3"  cellspacing="0"  style="border-collapse: collapse; border: none" >
    <tr>
    <td align="center"  valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" ><b>SPIClockMode</b></span></font><font color="#010101" ></font></div>
    </td>
    <td align="center"  valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial" ><span style="font-size:12pt" ><b>Description</b></span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td align="center"  valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" ><b>0</b></span></font><font color="#010101" ></font></div>
    </td>
    <td valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >SPI_CPOL = 0 &amp; SPI_CPHA = 0</span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td align="center"  valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" ><b>1</b></span></font><font color="#010101" ></font></div>
    </td>
    <td valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >SPI_CPOL = 0 &amp; SPI_CPHA = 1</span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td align="center"  valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" ><b>2</b></span></font><font color="#010101" ></font></div>
    </td>
    <td valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >SPI_CPOL = 1 &amp; SPI_CPHA = 0</span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td align="center"  valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" ><b>3</b></span></font><font color="#010101" ></font></div>
    </td>
    <td valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >SPI_CPOL = 1 &amp; SPI_CPHA = 1</span></font><font color="#010101" ></font></div>
    </td></tr></table></blockquote><div align="left" ><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >You can alternatively use constants to set the SPIClockMode as 
follows:</span></font><font color="#010101" ></font></div><blockquote><blockquote><table width="386"  cellpadding="1"  cellspacing="0"  style="border-collapse: collapse; border: none" >
    <tr>
    <td valign="middle"  width="379" >
    <div align="left" ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" >SPIMode ( MasterFast, <b>SPI_CPOL_n + SPI_CPHA_n</b> )</span></font><font color="#010101" ></font></div>
    </td>
    <td valign="middle"  width="3" >
    <div align="left" >&nbsp;<font color="#010101" ></font></div>
    </td></tr></table></blockquote></blockquote><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >Where the following parameters can be used as a calculation to set 
the SPIClockMode.</span></font><font color="#010101" ></font></div><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font color="#010101" ></font></div><blockquote><table border="1"  width="491"  cellpadding="3"  cellspacing="0"  style="border-collapse: collapse; border: none" >
    <tr>
    <td align="center"  valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" ><b>SPIClockMode</b></span></font><font color="#010101" ></font></div>
    </td>
    <td align="center"  valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="center" ><font face="Arial" ><span style="font-size:12pt" ><b>Description</b></span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" ><b>SPI_CPOL_0 </b></span></font><font color="#010101" ></font></div>
    </td>
    <td valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >CPOL = 0</span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" ><b>SPI_CPOL_1</b></span></font><font color="#010101" ></font></div>
    </td>
    <td valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >CPOL = 1</span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" ><b>SPI_CPHA_0</b></span></font><font color="#010101" ></font></div>
    </td>
    <td valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >CPHA = 0</span></font><font color="#010101" ></font></div>
    </td></tr>
    <tr>
    <td valign="top"  width="114"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Courier New"  color="#010101" ><span style="font-size:10pt" ><b>SPI_CPHA_1</b></span></font><font color="#010101" ></font></div>
    </td>
    <td valign="top"  width="360"  style="border: solid #010101 1px;" >
    <div align="left" ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >CPHA = 1</span></font><font color="#010101" ></font></div>
    </td></tr></table></blockquote><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><br></div><font color="#010101" ><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><br></font></div><font color="#010101" ><div align="left"  style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ></font><font face="Arial"  color="#010101" ><span style="font-size:12pt" ><b>Summary</b></span></font><font color="#010101" ></font></div><p style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial"  color="#252525" ><span style="font-size:12pt" >When using SPI setting the clock frequency is completed using </span></font><font face="Arial" ><span style="font-size:12pt" ><b>SPIMode</b></span></font><font face="Arial"  color="#252525" ><span style="font-size:12pt" >, and the master must also configure the clock polarity and 
phase with respect to the data. Using the two options as CPOL and 
CPHA.</span></font><font color="#010101" ></font><br><p style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial"  color="#252525" ><span style="font-size:12pt" >The&nbsp;timing diagram&nbsp;is shown below. The timing is further described 
and applies to both the master and the slave device.</span></font><font color="#010101" ></font><br><p style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial"  color="#252525" ><span style="font-size:12pt" >When CPOL=0 the base value of the clock is zero, i.e. the active state 
is 1 and idle state is 0.</span></font><font color="#010101" ></font><br><p style="margin-left:25mm; margin-right:0mm; text-indent:-6mm; " ><font face="Symbol"  color="#252525" ><span style="font-size:10pt" >&middot;&nbsp;&nbsp;&nbsp;&nbsp;</span></font><font face="Arial"  color="#252525" ><span style="font-size:12pt" >For CPHA=0, data are captured on the clock's rising edge 
(low&rarr;high transition) and data is output on a falling edge 
(high&rarr;low clock transition).</span></font><font color="#010101" ></font><br><p style="margin-left:25mm; margin-right:0mm; text-indent:-6mm; " ><font face="Symbol"  color="#252525" ><span style="font-size:10pt" >&middot;&nbsp;&nbsp;&nbsp;&nbsp;</span></font><font face="Arial"  color="#252525" ><span style="font-size:12pt" >For CPHA=1, data are captured on the clock's falling edge and 
data is output on a rising edge.</span></font><font color="#010101" ></font><br><p style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial"  color="#010101" ><span style="font-size:12pt" >When CPOL=1 the base value of the clock is one (inversion of 
CPOL=0), i.e. the active state is 0 and idle state is 1.</span></font><font color="#010101" ></font><br><p style="margin-left:25mm; margin-right:0mm; text-indent:-6mm; " ><font face="Symbol"  color="#252525" ><span style="font-size:10pt" >&middot;&nbsp;&nbsp;&nbsp;&nbsp;</span></font><font face="Arial"  color="#252525" ><span style="font-size:12pt" >For CPHA=0, data are captured on clock's falling edge and data 
is output on a rising edge.</span></font><font color="#010101" ></font><br><p style="margin-left:25mm; margin-right:0mm; text-indent:-6mm; " ><font face="Symbol"  color="#252525" ><span style="font-size:10pt" >&middot;&nbsp;&nbsp;&nbsp;&nbsp;</span></font><font face="Arial"  color="#252525" ><span style="font-size:12pt" >For CPHA=1, data are captured on clock's rising edge 
and data is output on a falling edge.</span></font><font color="#010101" ></font><br><p style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial"  color="#252525" ><span style="font-size:12pt" >When CPHA=0 means sampling on the first clock edge and , while 
CPHA=1 means sampling on the second clock edge, regardless of 
whether that clock edge is rising or falling.&nbsp; Note that with CPHA=0, 
the data must be stable for a half cycle before the first clock cycle.</span></font><font color="#010101" ></font><br><p style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial"  color="#252525" ><span style="font-size:12pt" >In other words, CPHA=0 means transmitting data on the active to idle 
state and CPHA=1 means that data is transmitted on the idle to active 
state edge. Note that if transmission happens on a particular edge, 
then capturing will happen on the opposite edge(i.e. if transmission 
happens on falling, then reception happens on rising and vice versa). 
The MOSI and MISO signals are usually stable (at their reception 
points) for the half cycle until the next clock transition. SPI master and 
slave devices may well sample data at different points in that half 
cycle.</span></font><font color="#010101" ></font><br><p style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Arial"  color="#252525" ><span style="font-size:12pt" >This adds more flexibility to the communication channel between the 
master and slave.</span></font><font color="#010101" ></font><br><div align="left"  style="margin-left:25mm; margin-right:0mm; text-indent:0mm; " ><img src="spimode1.PNG"  width="329"  height="187"  border="0"  alt="graphic" ><font color="#010101" ></font></div><div align="left" ><br></div><font color="#010101" ><div align="left" ><br></font></div><font color="#010101" ><div align="left" ></font><font face="Arial"  color="#010101" ><span style="font-size:12pt" ><b>See Also </b></span></font><a href="spitransfer.htm"><font face="Arial"  color="#0000ff" ><span style="font-size:12pt" ><u>SPITransfer</u></span></font></a><font color="#010101" ></font></div><div align="left" ><font color="#010101" ></font></div>

</html>
